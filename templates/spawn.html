{% extends "page.html" %}

{% block title %}Server Options - CIRRUS JupyterHub{% endblock %}

{% if announcement_spawn is string %}
  {% set announcement = announcement_spawn %}
{% endif %}

{% block logo %}
<span id="jupyterhub-logo" class="navbar-brand d-flex align-items-center">
  <a href="{{ logo_url or base_url }}">
    <img src='{{ base_url }}logo'
         alt='JupyterHub logo'
         class='jpy-logo'
         title='Home' />
  </a>
  <img src="https://raw.githubusercontent.com/NCAR/cirrus-jhub-templates/main/static/images/NSF-NCAR_Logo_Color-White_RGB.png" 
       alt="NCAR Logo" 
       class="ncar-logo-navbar ms-3">
</span>
{% endblock %}

{% block main %}
<div class="container spawn-container">
    {% block heading %}
    <div class="row text-center">
        <div class="col-12">
            <h1 class="spawn-heading">Server Options</h1>
            <p class="spawn-subtitle">Configure your JupyterHub server environment</p>
        </div>
    </div>
    {% endblock heading %}
    
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            {% if for_user and user.name != for_user.name -%}
            <div class="alert alert-info">
                <i class="fa fa-info-circle"></i> Spawning server for <strong>{{ for_user.name }}</strong>
            </div>
            {% endif -%}
            
            {% if error_message %}
            <div class="spawn-error-msg alert alert-danger">
                <i class="fa fa-exclamation-triangle"></i> <strong>Error:</strong> {{ error_message }}
            </div>
            {% elif error_html_message %}
            <div class="spawn-error-msg alert alert-danger">
                <i class="fa fa-exclamation-triangle"></i> {{ error_html_message | safe }}
            </div>
            {% endif %}
            
            <div class="spawn-form-card">
                <form enctype="multipart/form-data"
                      id="spawn_form"
                      action="{{ url | safe }}"
                      method="post"
                      role="form">
                    {{ spawner_options_form | safe }}
                    
                    <div class="feedback-container">
                        <button type="submit" class="btn btn-jupyter btn-lg form-control">
                            <i class="fa fa-rocket"></i> Start Server
                        </button>
                        <div class="feedback-widget hidden">
                            <i class="fa fa-spinner fa-pulse"></i> Starting...
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock main %}

{% block footer %}
<footer class="footer">
    <div class="container">
        <div class="row py-5">
            <div class="col-lg-3 mb-4 mb-lg-0">
                <h5 class="footer-heading mb-3">CIRRUS</h5>
                <div class="footer-links">
                    <a href="/" class="d-block mb-2">Home</a>
                    <a href="https://ncar-hpc-docs.readthedocs.io/en/latest/compute-systems/cirrus/guides/01-intro/" target="_blank" class="d-block mb-2">Documentation</a>
                    <a href="mailto:cirrus-admin@ucar.edu" class="d-block mb-2">Contact</a>
                </div>
            </div>
            
            <div class="col-lg-3 mb-4 mb-lg-0">
                <h5 class="footer-heading mb-3">Resources</h5>
                <div class="footer-links">
                    <a href="https://mlc1-argo.k8s.ucar.edu/" target="_blank" class="d-block mb-2">ML Argo CD</a>
                    <a href="https://nwc1-argo.k8s.ucar.edu/" target="_blank" class="d-block mb-2">NWSC Argo CD</a>
                    <a href="https://jupyter.k8s.ucar.edu/" target="_blank" class="d-block mb-2">JupyterHub</a>
                    <a href="https://hub.k8s.ucar.edu/" target="_blank" class="d-block mb-2">Harbor Registry</a>
                    <a href="https://grafana.k8s.ucar.edu/" target="_blank" class="d-block mb-2">Grafana</a>
                </div>
            </div>
            
            <div class="col-lg-3 mb-4 mb-lg-0">
                <h5 class="footer-heading mb-3">NSF NCAR</h5>
                <div class="footer-links">
                    <a href="https://ncar.ucar.edu/" target="_blank" class="d-block mb-2">NSF NCAR Homepage</a>
                    <a href="https://www.cisl.ucar.edu/" target="_blank" class="d-block mb-2">CISL</a>
                    <a href="https://jira.ucar.edu/secure/CreateIssueDetails!init.jspa?pid=18470&issuetype=10905" target="_blank" class="d-block mb-2">Report Issue</a>
                </div>
            </div>
            
            <div class="col-lg-3">
                <h5 class="footer-heading mb-3">UCAR</h5>
                <div class="footer-links">
                    <a href="https://www.ucar.edu/" target="_blank" class="d-block mb-2">UCAR Homepage</a>
                    <a href="https://www.ucar.edu/who-we-are/governance/member-institutions" target="_blank" class="d-block mb-2">Member Institutions</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="legal-footer">
        <div class="container">
            <div class="row py-3">
                <div class="col-12 text-center">
                    <p class="legal-footer-text mb-2">
                        &copy; 2025 UCAR | 
                        <a href="https://www.ucar.edu/privacy-policy" target="_blank" class="legal-link">Privacy</a> | 
                        <a href="https://www.ucar.edu/terms-of-use" target="_blank" class="legal-link">Terms of Use</a> | 
                        Sponsored by 
                        <a href="https://www.nsf.gov/" target="_blank" class="legal-link">U.S. NSF</a>
                    </p>
                    <p class="legal-footer-address mb-0">
                        Postal Address: P.O. Box 3000, Boulder, CO 80307-3000 â€¢ Shipping Address: 3090 Center Green Drive, Boulder, CO 80301
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer-nsf-section">
        <div class="container">
            <div class="row align-items-center py-4">
                <div class="col-auto text-center text-md-start mb-3 mb-md-0">
                    <img src="https://www.cisl.ucar.edu/themes/custom/img/NSF_Official_logo.png" 
                         alt="NSF Logo" 
                         class="footer-nsf-logo">
                </div>
                <div class="col">
                    <p class="footer-nsf-text mb-0">
                        This material is based upon work supported by the NSF National Center for Atmospheric Research, 
                        a major facility sponsored by the U.S. National Science Foundation and managed by the University 
                        Corporation for Atmospheric Research. Any opinions, findings and conclusions or recommendations 
                        expressed in this material do not necessarily reflect the views of the 
                        <a href="https://nsf.gov/" target="_blank" class="footer-nsf-link">U.S. National Science Foundation</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>
{% endblock %}

{% block script %}
{{ super() }}
<script>
    // setup onSubmit feedback
    $('form').submit((e) => {
        var form = $(e.target);
        form.find('.feedback-container>button').attr('disabled', true);
        form.find('.feedback-container>*').toggleClass('hidden');
    });
</script>
{% endblock script %}